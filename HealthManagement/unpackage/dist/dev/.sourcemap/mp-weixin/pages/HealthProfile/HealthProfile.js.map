{"version":3,"file":"HealthProfile.js","sources":["pages/HealthProfile/HealthProfile.vue","S:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvSGVhbHRoUHJvZmlsZS9IZWFsdGhQcm9maWxlLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"healthProfile\">\r\n\t\t<view class=\"header\">\r\n\t\t\t<text class=\"title\">健康档案</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"profile-card\">\r\n\t\t\t<view class=\"card-title\">基本信息</view>\r\n\t\t\t<view class=\"form-row\">\r\n\t\t\t\t<view class=\"label\">身高 (cm)</view>\r\n\t\t\t\t<input \r\n\t\t\t\t\tclass=\"input\" \r\n\t\t\t\t\ttype=\"number\" \r\n\t\t\t\t\tv-model.number=\"profile.height\" \r\n\t\t\t\t\tplaceholder=\"请输入身高\"\r\n\t\t\t\t\t@blur=\"calculateBMI\"\r\n\t\t\t\t/>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"form-row\">\r\n\t\t\t\t<view class=\"label\">体重 (kg)</view>\r\n\t\t\t\t<input \r\n\t\t\t\t\tclass=\"input\" \r\n\t\t\t\t\ttype=\"number\" \r\n\t\t\t\t\tv-model.number=\"profile.weight\" \r\n\t\t\t\t\tplaceholder=\"请输入体重\"\r\n\t\t\t\t\t@blur=\"calculateBMI\"\r\n\t\t\t\t/>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"form-row\" v-if=\"profile.bmi\">\r\n\t\t\t\t<view class=\"label\">BMI指数</view>\r\n\t\t\t\t<view class=\"bmi-info\">\r\n\t\t\t\t\t<text class=\"bmi-value\">{{ profile.bmi }}</text>\r\n\t\t\t\t\t<text class=\"bmi-category\" :class=\"getBmiCategoryClass(profile.bmi)\">\r\n\t\t\t\t\t\t{{ getBmiCategory(profile.bmi) }}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"profile-card\">\r\n\t\t\t<view class=\"card-title\">健康指标</view>\r\n\t\t\t<view class=\"form-row\">\r\n\t\t\t\t<view class=\"label\">收缩压</view>\r\n\t\t\t\t<input \r\n\t\t\t\t\tclass=\"input\" \r\n\t\t\t\t\ttype=\"number\" \r\n\t\t\t\t\tv-model.number=\"profile.bloodPressureSystolic\" \r\n\t\t\t\t\tplaceholder=\"请输入收缩压\"\r\n\t\t\t\t/>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"form-row\">\r\n\t\t\t\t<view class=\"label\">舒张压</view>\r\n\t\t\t\t<input \r\n\t\t\t\t\tclass=\"input\" \r\n\t\t\t\t\ttype=\"number\" \r\n\t\t\t\t\tv-model.number=\"profile.bloodPressureDiastolic\" \r\n\t\t\t\t\tplaceholder=\"请输入舒张压\"\r\n\t\t\t\t/>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"form-row\">\r\n\t\t\t\t<view class=\"label\">血糖值</view>\r\n\t\t\t\t<input \r\n\t\t\t\t\tclass=\"input\" \r\n\t\t\t\t\ttype=\"number\" \r\n\t\t\t\t\tv-model.number=\"profile.bloodSugar\" \r\n\t\t\t\t\tplaceholder=\"请输入血糖值\"\r\n\t\t\t\t/>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"form-row\">\r\n\t\t\t\t<view class=\"label\">胆固醇值</view>\r\n\t\t\t\t<input \r\n\t\t\t\t\tclass=\"input\" \r\n\t\t\t\t\ttype=\"number\" \r\n\t\t\t\t\tv-model.number=\"profile.cholesterol\" \r\n\t\t\t\t\tplaceholder=\"请输入胆固醇值\"\r\n\t\t\t\t/>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"profile-card\">\r\n\t\t\t<view class=\"card-title\">健康历史</view>\r\n\t\t\t<view class=\"form-row\">\r\n\t\t\t\t<view class=\"label\">病史</view>\r\n\t\t\t\t<textarea \r\n\t\t\t\t\tclass=\"textarea\" \r\n\t\t\t\t\tv-model=\"profile.medicalHistory\" \r\n\t\t\t\t\tplaceholder=\"请输入病史信息\"\r\n\t\t\t\t/>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"form-row\">\r\n\t\t\t\t<view class=\"label\">过敏史</view>\r\n\t\t\t\t<textarea \r\n\t\t\t\t\tclass=\"textarea\" \r\n\t\t\t\t\tv-model=\"profile.allergies\" \r\n\t\t\t\t\tplaceholder=\"请输入过敏史信息\"\r\n\t\t\t\t/>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"form-row\">\r\n\t\t\t\t<view class=\"label\">用药情况</view>\r\n\t\t\t\t<textarea \r\n\t\t\t\t\tclass=\"textarea\" \r\n\t\t\t\t\tv-model=\"profile.medications\" \r\n\t\t\t\t\tplaceholder=\"请输入用药情况\"\r\n\t\t\t\t/>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"profile-card\">\r\n\t\t\t<view class=\"card-title\">紧急联系人</view>\r\n\t\t\t<view class=\"form-row\">\r\n\t\t\t\t<view class=\"label\">联系人姓名</view>\r\n\t\t\t\t<input \r\n\t\t\t\t\tclass=\"input\" \r\n\t\t\t\t\tv-model=\"profile.emergencyContact\" \r\n\t\t\t\t\tplaceholder=\"请输入紧急联系人姓名\"\r\n\t\t\t\t/>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"form-row\">\r\n\t\t\t\t<view class=\"label\">联系电话</view>\r\n\t\t\t\t<input \r\n\t\t\t\t\tclass=\"input\" \r\n\t\t\t\t\tv-model=\"profile.emergencyPhone\" \r\n\t\t\t\t\tplaceholder=\"请输入紧急联系电话\"\r\n\t\t\t\t/>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"actions\">\r\n\t\t\t<button class=\"btn-save\" @click=\"saveProfile\">保存档案</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport apiConfig from '@/api/config.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tprofile: {\r\n\t\t\t\theight: null,\r\n\t\t\t\tweight: null,\r\n\t\t\t\tbmi: null,\r\n\t\t\t\tbloodPressureSystolic: null,\r\n\t\t\t\tbloodPressureDiastolic: null,\r\n\t\t\t\tbloodSugar: null,\r\n\t\t\t\tcholesterol: null,\r\n\t\t\t\tmedicalHistory: '',\r\n\t\t\t\tallergies: '',\r\n\t\t\t\tmedications: '',\r\n\t\t\t\temergencyContact: '',\r\n\t\t\t\temergencyPhone: ''\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tonLoad() {\r\n\t\tthis.loadProfile();\r\n\t},\r\n\tmethods: {\r\n\t\t// 加载健康档案\r\n\t\tloadProfile() {\r\n\t\t\tconst token = uni.getStorageSync('token');\r\n\t\t\tif (!token) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请先登录',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tuni.request({\r\n\t\t\t\turl: apiConfig.API_CONFIG.BASE_URL + apiConfig.API_CONFIG.HEALTH_PROFILES.ME,\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\theader: {\r\n\t\t\t\t\t'Authorization': 'Bearer ' + token\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.data.code === 0 && res.data.data) {\r\n\t\t\t\t\t\tthis.profile = { ...this.profile, ...res.data.data };\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: () => {\r\n\t\t\t\t\tconsole.log('加载健康档案失败');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t// 计算BMI\r\n\t\tcalculateBMI() {\r\n\t\t\tif (this.profile.height && this.profile.weight && this.profile.height > 0) {\r\n\t\t\t\tconst heightInMeters = this.profile.height / 100;\r\n\t\t\t\tthis.profile.bmi = Math.round((this.profile.weight / (heightInMeters * heightInMeters)) * 100) / 100;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// 获取BMI分类\r\n\t\tgetBmiCategory(bmi) {\r\n\t\t\tif (bmi < 18.5) return '偏瘦';\r\n\t\t\tif (bmi < 24) return '正常';\r\n\t\t\tif (bmi < 28) return '超重';\r\n\t\t\treturn '肥胖';\r\n\t\t},\r\n\t\t\r\n\t\t// 获取BMI分类样式\r\n\t\tgetBmiCategoryClass(bmi) {\r\n\t\t\tif (bmi < 18.5) return 'bmi-underweight';\r\n\t\t\tif (bmi < 24) return 'bmi-normal';\r\n\t\t\tif (bmi < 28) return 'bmi-overweight';\r\n\t\t\treturn 'bmi-obese';\r\n\t\t},\r\n\t\t\r\n\t\t// 保存健康档案\r\n\t\tsaveProfile() {\r\n\t\t\tconst token = uni.getStorageSync('token');\r\n\t\t\tif (!token) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请先登录',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tuni.request({\r\n\t\t\t\turl: apiConfig.API_CONFIG.BASE_URL + apiConfig.API_CONFIG.HEALTH_PROFILES.UPDATE,\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: this.profile,\r\n\t\t\t\theader: {\r\n\t\t\t\t\t'Authorization': 'Bearer ' + token\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.data.code === 0) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '保存成功',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '保存失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: () => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '网络错误',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.healthProfile {\r\n\tpadding: 20px;\r\n\tbackground: #f5f5f5;\r\n\tmin-height: 100vh;\r\n}\r\n\r\n.header {\r\n\ttext-align: center;\r\n\tmargin-bottom: 20px;\r\n}\r\n\r\n.title {\r\n\tfont-size: 24px;\r\n\tfont-weight: bold;\r\n\tcolor: #333;\r\n}\r\n\r\n.profile-card {\r\n\tbackground: #fff;\r\n\tborder-radius: 12px;\r\n\tpadding: 20px;\r\n\tmargin-bottom: 20px;\r\n\tbox-shadow: 0 2px 8px rgba(0,0,0,0.1);\r\n}\r\n\r\n.card-title {\r\n\tfont-size: 18px;\r\n\tfont-weight: bold;\r\n\tcolor: #333;\r\n\tmargin-bottom: 16px;\r\n\tborder-bottom: 2px solid #f0f0f0;\r\n\tpadding-bottom: 8px;\r\n}\r\n\r\n.form-row {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tmargin-bottom: 16px;\r\n}\r\n\r\n.label {\r\n\twidth: 120px;\r\n\tfont-size: 16px;\r\n\tcolor: #666;\r\n\tflex-shrink: 0;\r\n}\r\n\r\n.input, .textarea {\r\n\tflex: 1;\r\n\theight: 44px;\r\n\tline-height: 44px;\r\n\tbackground: #f8f8f8;\r\n\tborder-radius: 8px;\r\n\tpadding: 0 12px;\r\n\tfont-size: 16px;\r\n\tborder: 1px solid #e0e0e0;\r\n\tbox-sizing: border-box;\r\n}\r\n\r\n.textarea {\r\n\theight: 80px;\r\n\tline-height: 1.5;\r\n\tpadding: 12px;\r\n}\r\n\r\n.bmi-info {\r\n\tflex: 1;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tgap: 12px;\r\n}\r\n\r\n.bmi-value {\r\n\tfont-size: 20px;\r\n\tfont-weight: bold;\r\n\tcolor: #333;\r\n}\r\n\r\n.bmi-category {\r\n\tpadding: 4px 12px;\r\n\tborder-radius: 16px;\r\n\tfont-size: 14px;\r\n\tfont-weight: bold;\r\n}\r\n\r\n.bmi-underweight {\r\n\tbackground: #e6f7ff;\r\n\tcolor: #1890ff;\r\n}\r\n\r\n.bmi-normal {\r\n\tbackground: #f6ffed;\r\n\tcolor: #52c41a;\r\n}\r\n\r\n.bmi-overweight {\r\n\tbackground: #fff7e6;\r\n\tcolor: #fa8c16;\r\n}\r\n\r\n.bmi-obese {\r\n\tbackground: #fff2f0;\r\n\tcolor: #ff4d4f;\r\n}\r\n\r\n.actions {\r\n\tpadding: 20px 0;\r\n}\r\n\r\n.btn-save {\r\n\twidth: 100%;\r\n\theight: 48px;\r\n\tbackground: #F5296E;\r\n\tcolor: #fff;\r\n\tborder: none;\r\n\tborder-radius: 8px;\r\n\tfont-size: 16px;\r\n\tfont-weight: bold;\r\n}\r\n</style>\r\n\r\n\r\n","import MiniProgramPage from 'D:/HBuilder/HealthManagement/pages/HealthProfile/HealthProfile.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","apiConfig"],"mappings":"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"}