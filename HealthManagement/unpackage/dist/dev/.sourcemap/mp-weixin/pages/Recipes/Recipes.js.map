{"version":3,"file":"Recipes.js","sources":["pages/Recipes/Recipes.vue","S:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvUmVjaXBlcy9SZWNpcGVzLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"recipes\">\r\n\t\t<view class=\"header\">\r\n\t\t\t<text class=\"title\">食谱推荐</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 分类筛选 -->\r\n\t\t<view class=\"category-filter\">\r\n\t\t\t<scroll-view class=\"category-scroll\" scroll-x>\r\n\t\t\t\t<view class=\"category-list\">\r\n\t\t\t\t\t<view \r\n\t\t\t\t\t\tclass=\"category-item\" \r\n\t\t\t\t\t\t:class=\"{ active: selectedCategoryId === null }\"\r\n\t\t\t\t\t\t@click=\"selectCategory(null)\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t全部\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view \r\n\t\t\t\t\t\tclass=\"category-item\" \r\n\t\t\t\t\t\t:class=\"{ active: selectedCategoryId === category.id }\"\r\n\t\t\t\t\t\tv-for=\"category in categories\" \r\n\t\t\t\t\t\t:key=\"category.id\"\r\n\t\t\t\t\t\t@click=\"selectCategory(category.id)\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{{ category.name }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 食谱列表 -->\r\n\t\t<view class=\"recipe-list\">\r\n\t\t\t<view \r\n\t\t\t\tclass=\"recipe-item\" \r\n\t\t\t\tv-for=\"recipe in recipes\" \r\n\t\t\t\t:key=\"recipe.id\"\r\n\t\t\t\t@click=\"viewRecipeDetail(recipe)\"\r\n\t\t\t>\r\n\t\t\t\t<view class=\"recipe-image\">\r\n\t\t\t\t\t<image src=\"/static/recipe-placeholder.png\" mode=\"aspectFill\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"recipe-info\">\r\n\t\t\t\t\t<view class=\"recipe-name\">{{ recipe.name }}</view>\r\n\t\t\t\t\t<view class=\"recipe-desc\">{{ recipe.description || '暂无描述' }}</view>\r\n\t\t\t\t\t<view class=\"recipe-meta\">\r\n\t\t\t\t\t\t<text class=\"category-tag\">{{ recipe.category?.name || '未分类' }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 空状态 -->\r\n\t\t<view v-if=\"recipes.length === 0 && !loading\" class=\"empty-state\">\r\n\t\t\t<text class=\"empty-text\">暂无食谱</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 加载状态 -->\r\n\t\t<view v-if=\"loading\" class=\"loading-state\">\r\n\t\t\t<text class=\"loading-text\">加载中...</text>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport apiConfig from '@/api/config.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\trecipes: [],\r\n\t\t\tcategories: [],\r\n\t\t\tselectedCategoryId: null,\r\n\t\t\tloading: false\r\n\t\t};\r\n\t},\r\n\tonLoad() {\r\n\t\tthis.loadCategories();\r\n\t\tthis.loadRecipes();\r\n\t},\r\n\tmethods: {\r\n\t\t// 加载分类\r\n\t\tloadCategories() {\r\n\t\t\tuni.request({\r\n\t\t\t\turl: apiConfig.API_CONFIG.BASE_URL + '/recipe-categories',\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.data.code === 0) {\r\n\t\t\t\t\t\tthis.categories = res.data.data || [];\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: () => {\r\n\t\t\t\t\tconsole.log('加载分类失败');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t// 加载食谱\r\n\t\tloadRecipes() {\r\n\t\t\tthis.loading = true;\r\n\t\t\tconst url = this.selectedCategoryId \r\n\t\t\t\t? `${apiConfig.API_CONFIG.BASE_URL}${apiConfig.API_CONFIG.RECIPES.BY_CATEGORY}/${this.selectedCategoryId}`\r\n\t\t\t\t: `${apiConfig.API_CONFIG.BASE_URL}${apiConfig.API_CONFIG.RECIPES.ENABLED}`;\r\n\t\t\t\r\n\t\t\tuni.request({\r\n\t\t\t\turl: url,\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.data.code === 0) {\r\n\t\t\t\t\t\tthis.recipes = res.data.data || [];\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: () => {\r\n\t\t\t\t\tconsole.log('加载食谱失败');\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: () => {\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t// 选择分类\r\n\t\tselectCategory(categoryId) {\r\n\t\t\tthis.selectedCategoryId = categoryId;\r\n\t\t\tthis.loadRecipes();\r\n\t\t},\r\n\t\t\r\n\t\t// 查看食谱详情\r\n\t\tviewRecipeDetail(recipe) {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: `/pages/RecipeDetail/RecipeDetail?recipeId=${recipe.id}`\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.recipes {\r\n\tpadding: 20px;\r\n\tbackground: #f5f5f5;\r\n\tmin-height: 100vh;\r\n}\r\n\r\n.header {\r\n\ttext-align: center;\r\n\tmargin-bottom: 20px;\r\n}\r\n\r\n.title {\r\n\tfont-size: 24px;\r\n\tfont-weight: bold;\r\n\tcolor: #333;\r\n}\r\n\r\n.category-filter {\r\n\tmargin-bottom: 20px;\r\n}\r\n\r\n.category-scroll {\r\n\twhite-space: nowrap;\r\n}\r\n\r\n.category-list {\r\n\tdisplay: flex;\r\n\tgap: 12px;\r\n\tpadding: 0 20px;\r\n}\r\n\r\n.category-item {\r\n\tpadding: 8px 16px;\r\n\tbackground: #fff;\r\n\tborder-radius: 20px;\r\n\tfont-size: 14px;\r\n\tcolor: #666;\r\n\tborder: 1px solid #e0e0e0;\r\n\twhite-space: nowrap;\r\n\ttransition: all 0.3s;\r\n}\r\n\r\n.category-item.active {\r\n\tbackground: #F5296E;\r\n\tcolor: #fff;\r\n\tborder-color: #F5296E;\r\n}\r\n\r\n.recipe-list {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tgap: 16px;\r\n}\r\n\r\n.recipe-item {\r\n\tbackground: #fff;\r\n\tborder-radius: 12px;\r\n\tpadding: 16px;\r\n\tbox-shadow: 0 2px 8px rgba(0,0,0,0.1);\r\n\tdisplay: flex;\r\n\tgap: 12px;\r\n}\r\n\r\n.recipe-image {\r\n\twidth: 80px;\r\n\theight: 80px;\r\n\tborder-radius: 8px;\r\n\toverflow: hidden;\r\n\tflex-shrink: 0;\r\n}\r\n\r\n.recipe-image image {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n}\r\n\r\n.recipe-info {\r\n\tflex: 1;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: space-between;\r\n}\r\n\r\n.recipe-name {\r\n\tfont-size: 16px;\r\n\tfont-weight: bold;\r\n\tcolor: #333;\r\n\tmargin-bottom: 4px;\r\n}\r\n\r\n.recipe-desc {\r\n\tfont-size: 14px;\r\n\tcolor: #666;\r\n\tline-height: 1.4;\r\n\tmargin-bottom: 8px;\r\n\tdisplay: -webkit-box;\r\n\t-webkit-line-clamp: 2;\r\n\t-webkit-box-orient: vertical;\r\n\toverflow: hidden;\r\n}\r\n\r\n.recipe-meta {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tgap: 8px;\r\n}\r\n\r\n.category-tag {\r\n\tpadding: 2px 8px;\r\n\tbackground: #f0f0f0;\r\n\tborder-radius: 12px;\r\n\tfont-size: 12px;\r\n\tcolor: #666;\r\n}\r\n\r\n.empty-state, .loading-state {\r\n\ttext-align: center;\r\n\tpadding: 60px 20px;\r\n}\r\n\r\n.empty-text, .loading-text {\r\n\tfont-size: 16px;\r\n\tcolor: #999;\r\n}\r\n</style>\r\n\r\n\r\n","import MiniProgramPage from 'D:/HBuilder/HealthManagement/pages/Recipes/Recipes.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","apiConfig"],"mappings":";;;;AAkEA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,SAAS,CAAE;AAAA,MACX,YAAY,CAAE;AAAA,MACd,oBAAoB;AAAA,MACpB,SAAS;AAAA;EAEV;AAAA,EACD,SAAS;AACR,SAAK,eAAc;AACnB,SAAK,YAAW;AAAA,EAChB;AAAA,EACD,SAAS;AAAA;AAAA,IAER,iBAAiB;AAChBA,oBAAAA,MAAI,QAAQ;AAAA,QACX,KAAKC,WAAS,UAAC,WAAW,WAAW;AAAA,QACrC,QAAQ;AAAA,QACR,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,KAAK,SAAS,GAAG;AACxB,iBAAK,aAAa,IAAI,KAAK,QAAQ,CAAA;AAAA,UACpC;AAAA,QACA;AAAA,QACD,MAAM,MAAM;AACXD,wBAAAA,sDAAY,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACD;AAAA;AAAA,IAGD,cAAc;AACb,WAAK,UAAU;AACf,YAAM,MAAM,KAAK,qBACd,GAAGC,WAAS,UAAC,WAAW,QAAQ,GAAGA,WAAS,UAAC,WAAW,QAAQ,WAAW,IAAI,KAAK,kBAAkB,KACtG,GAAGA,WAAAA,UAAU,WAAW,QAAQ,GAAGA,WAAS,UAAC,WAAW,QAAQ,OAAO;AAE1ED,oBAAAA,MAAI,QAAQ;AAAA,QACX;AAAA,QACA,QAAQ;AAAA,QACR,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,KAAK,SAAS,GAAG;AACxB,iBAAK,UAAU,IAAI,KAAK,QAAQ,CAAA;AAAA,UACjC;AAAA,QACA;AAAA,QACD,MAAM,MAAM;AACXA,wBAAAA,uDAAY,QAAQ;AAAA,QACpB;AAAA,QACD,UAAU,MAAM;AACf,eAAK,UAAU;AAAA,QAChB;AAAA,MACD,CAAC;AAAA,IACD;AAAA;AAAA,IAGD,eAAe,YAAY;AAC1B,WAAK,qBAAqB;AAC1B,WAAK,YAAW;AAAA,IAChB;AAAA;AAAA,IAGD,iBAAiB,QAAQ;AACxBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,6CAA6C,OAAO,EAAE;AAAA,MAC5D,CAAC;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpIA,GAAG,WAAW,eAAe;"}