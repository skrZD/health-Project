# ğŸ” Spring Securityæƒé™é—®é¢˜è§£å†³æ–¹æ¡ˆ

## âŒ é—®é¢˜æ ¹æœ¬åŸå› 

403 Forbidden é”™è¯¯çš„çœŸæ­£åŸå› æ˜¯ **Spring Security æƒé™é…ç½®**ï¼

### é—®é¢˜åˆ†æï¼š
1. `/api/test/image/{filename}` æ¥å£è¢«Spring Securityæ‹¦æˆª
2. è¯¥æ¥å£æ²¡æœ‰åœ¨ `permitAll()` åˆ—è¡¨ä¸­
3. éœ€è¦è®¤è¯æ‰èƒ½è®¿é—®ï¼Œä½†å‰ç«¯æ²¡æœ‰æä¾›è®¤è¯ä¿¡æ¯

## âœ… è§£å†³æ–¹æ¡ˆ

### ä¿®å¤SecurityConfig.java
åœ¨ `SecurityConfig.java` ä¸­æ·»åŠ äº†ä»¥ä¸‹è·¯å¾„åˆ° `permitAll()` åˆ—è¡¨ï¼š

```java
.antMatchers(
    "/api/auth/**",                    // è®¤è¯ç›¸å…³æ¥å£
    "/api/admin/auth/login",           // ç®¡ç†å‘˜ç™»å½•æ¥å£
    "/api/admin/auth/refresh",         // ç®¡ç†å‘˜åˆ·æ–°tokenæ¥å£
    "/api/health",                     // å¥åº·æ£€æŸ¥
    "/api/foods/search",               // é£Ÿç‰©æœç´¢
    "/api/food-categories",            // é£Ÿç‰©åˆ†ç±»
    "/api/recipes/**",                 // é£Ÿè°±æŸ¥è¯¢ï¼ˆåŒ…å«æ‰€æœ‰å­è·¯å¾„ï¼‰
    "/api/recipe-categories/**",       // é£Ÿè°±åˆ†ç±»ï¼ˆåŒ…å«æ‰€æœ‰å­è·¯å¾„ï¼‰
    "/api/health-profiles/**",         // å¥åº·æ¡£æ¡ˆï¼ˆåŒ…å«æ‰€æœ‰å­è·¯å¾„ï¼‰
    "/api/bmi-calculations/**",        // BMIè®¡ç®—ï¼ˆåŒ…å«æ‰€æœ‰å­è·¯å¾„ï¼‰
    "/api/test/**",                    // æµ‹è¯•æ¥å£ï¼ˆåŒ…å«å›¾ç‰‡è®¿é—®ï¼‰âœ… æ–°å¢
    "/static/**",                      // é™æ€èµ„æº âœ… æ–°å¢
    "/docs/**",                        // Swaggeræ–‡æ¡£
    "/swagger-ui/**",                  // Swagger UI
    "/v3/api-docs/**",                 // OpenAPIæ–‡æ¡£
    "/error"                           // é”™è¯¯é¡µé¢
).permitAll()
```

## ğŸš€ æµ‹è¯•æ­¥éª¤

### 1. é‡å¯åç«¯æœåŠ¡
```bash
cd D:\JetBrains\IdeaProjects\health-platform
mvn spring-boot:run
```

### 2. æµ‹è¯•å›¾ç‰‡è®¿é—®
è®¿é—®ï¼š`http://localhost:8088/api/test/image/52fd5655-92a3-4044-a7ae-10046a09d084.png`

### 3. æµ‹è¯•å‰ç«¯é¡µé¢
- è¿›å…¥é£Ÿè°±ç®¡ç†é¡µé¢
- æŸ¥çœ‹å›¾ç‰‡æ˜¯å¦èƒ½æ­£å¸¸æ˜¾ç¤º

## ğŸ“‹ ä¿®æ”¹å†…å®¹

### åç«¯ä¿®æ”¹ï¼š
1. **SecurityConfig.java** - æ·»åŠ äº† `/api/test/**` å’Œ `/static/**` åˆ°å…è®¸è®¿é—®åˆ—è¡¨
2. **TestController.java** - å›¾ç‰‡è®¿é—®æ¥å£ä¿æŒä¸å˜

### å‰ç«¯ä¿®æ”¹ï¼š
- **Recipes.vue** - å›¾ç‰‡URLç”Ÿæˆé€»è¾‘ä¿æŒä¸å˜

## âœ… é¢„æœŸç»“æœ

- å›¾ç‰‡åº”è¯¥èƒ½é€šè¿‡APIæ¥å£æ­£å¸¸è®¿é—®
- å‰ç«¯é¡µé¢åº”è¯¥èƒ½æ­£å¸¸æ˜¾ç¤ºå›¾ç‰‡
- ä¸å†å‡ºç°403 Forbiddené”™è¯¯

## ğŸ” è°ƒè¯•ä¿¡æ¯

å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. åç«¯æ§åˆ¶å°æ˜¯å¦è¾“å‡ºäº†è·¯å¾„ä¿¡æ¯
2. è®¿é—® `/api/test/debug` æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
3. æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­çš„ç½‘ç»œè¯·æ±‚çŠ¶æ€

ç°åœ¨è¯·é‡å¯åç«¯æœåŠ¡å¹¶æµ‹è¯•ï¼


