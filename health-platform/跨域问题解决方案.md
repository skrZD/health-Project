# 🔧 跨域问题解决方案

## ❌ 问题分析

403 Forbidden 错误很可能是跨域问题，因为：
1. 前端运行在 `http://localhost:3000`
2. 后端运行在 `http://localhost:8088`
3. 静态资源访问需要跨域配置

## ✅ 解决方案

### 方案1：使用API接口访问图片（推荐）

**优势**：
- 避免静态资源配置复杂性
- 更好的跨域控制
- 统一的错误处理

**实现**：
1. 后端通过 `/api/test/image/{filename}` 接口返回图片
2. 前端使用API接口而不是静态资源路径
3. 添加了完整的跨域头信息

### 方案2：配置静态资源跨域

**实现**：
1. 在WebConfig中添加了跨域配置
2. 允许所有来源访问静态资源
3. 设置适当的缓存策略

## 🚀 测试步骤

### 1. 重启后端服务
```bash
cd D:\JetBrains\IdeaProjects\health-platform
mvn spring-boot:run
```

### 2. 测试API接口访问图片
访问：`http://localhost:8088/api/test/image/cad49cad-0543-4df9-b610-60790a6f1f3d.png`

### 3. 测试前端页面
- 进入食谱管理页面
- 查看图片是否能正常显示

## 📋 修改内容

### 后端修改：
1. **WebConfig.java** - 添加了跨域配置
2. **TestController.java** - 改进了图片API接口，添加了跨域头信息

### 前端修改：
1. **Recipes.vue** - 修改了 `getImageUrl` 方法，使用API接口而不是静态资源

## 🔍 调试信息

如果还有问题，请检查：
1. 后端控制台是否输出了路径信息
2. 访问 `/api/test/debug` 查看详细信息
3. 浏览器开发者工具中的网络请求状态

## ✅ 预期结果

- 图片应该能通过API接口正常访问
- 前端页面应该能正常显示图片
- 不再出现403 Forbidden错误

现在请重启后端服务并测试！


