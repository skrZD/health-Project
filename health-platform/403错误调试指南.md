# ğŸ” 403 Forbidden é”™è¯¯è°ƒè¯•æŒ‡å—

## âŒ é—®é¢˜æè¿°

è®¿é—® `http://localhost:8088/static/recipes/cad49cad-0543-4df9-b610-60790a6f1f3d.png` è¿”å› 403 Forbidden é”™è¯¯ã€‚

## ğŸ” è°ƒè¯•æ­¥éª¤

### 1. é‡å¯åç«¯æœåŠ¡
```bash
cd D:\JetBrains\IdeaProjects\health-platform
mvn spring-boot:run
```

### 2. æ£€æŸ¥è°ƒè¯•ä¿¡æ¯
è®¿é—®ä»¥ä¸‹æ¥å£è·å–è¯¦ç»†ä¿¡æ¯ï¼š

#### 2.1 æ£€æŸ¥è·¯å¾„é…ç½®
```
GET http://localhost:8088/api/test/path
```

#### 2.2 æ£€æŸ¥æ–‡ä»¶åˆ—è¡¨
```
GET http://localhost:8088/api/test/files
```

#### 2.3 æ£€æŸ¥è¯¦ç»†è°ƒè¯•ä¿¡æ¯
```
GET http://localhost:8088/api/test/debug
```

#### 2.4 æµ‹è¯•å›¾ç‰‡è®¿é—®ï¼ˆç»•è¿‡é™æ€èµ„æºé…ç½®ï¼‰
```
GET http://localhost:8088/api/test/image/cad49cad-0543-4df9-b610-60790a6f1f3d.png
```

### 3. æ£€æŸ¥æ§åˆ¶å°è¾“å‡º
æŸ¥çœ‹åç«¯æ§åˆ¶å°æ˜¯å¦æœ‰ä»¥ä¸‹è¾“å‡ºï¼š
```
Static resource path: D:\JetBrains\IdeaProjects\health-platform\uploads
```

## ğŸ”§ å¯èƒ½çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1ï¼šè·¯å¾„åˆ†éš”ç¬¦é—®é¢˜
**ç—‡çŠ¶**ï¼šWindowsè·¯å¾„ä½¿ç”¨ `\`ï¼Œä½†é…ç½®éœ€è¦ `/`
**è§£å†³**ï¼šä½¿ç”¨ `Paths.get()` è‡ªåŠ¨å¤„ç†åˆ†éš”ç¬¦

### é—®é¢˜2ï¼šæ–‡ä»¶æƒé™é—®é¢˜
**ç—‡çŠ¶**ï¼šåº”ç”¨æ²¡æœ‰è¯»å–æ–‡ä»¶çš„æƒé™
**è§£å†³**ï¼šæ£€æŸ¥æ–‡ä»¶æƒé™ï¼Œç¡®ä¿åº”ç”¨æœ‰è¯»å–æƒé™

### é—®é¢˜3ï¼šé™æ€èµ„æºé…ç½®é—®é¢˜
**ç—‡çŠ¶**ï¼šSpring Booté™æ€èµ„æºé…ç½®ä¸æ­£ç¡®
**è§£å†³**ï¼šæ£€æŸ¥WebConfigé…ç½®

### é—®é¢˜4ï¼šæ–‡ä»¶ä¸å­˜åœ¨
**ç—‡çŠ¶**ï¼šæ–‡ä»¶è·¯å¾„é”™è¯¯æˆ–æ–‡ä»¶ä¸å­˜åœ¨
**è§£å†³**ï¼šæ£€æŸ¥æ–‡ä»¶æ˜¯å¦çœŸçš„å­˜åœ¨

## ğŸš€ å¿«é€Ÿä¿®å¤æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šä½¿ç”¨æµ‹è¯•æ¥å£è®¿é—®å›¾ç‰‡
å¦‚æœ `/api/test/image/{filename}` èƒ½æ­£å¸¸è®¿é—®ï¼Œè¯´æ˜æ–‡ä»¶å­˜åœ¨ï¼Œé—®é¢˜åœ¨é™æ€èµ„æºé…ç½®ã€‚

### æ–¹æ¡ˆ2ï¼šæ£€æŸ¥æ–‡ä»¶æƒé™
åœ¨Windowsä¸­ï¼Œå³é”®ç‚¹å‡» `uploads` æ–‡ä»¶å¤¹ â†’ å±æ€§ â†’ å®‰å…¨ â†’ ç¡®ä¿åº”ç”¨æœ‰è¯»å–æƒé™ã€‚

### æ–¹æ¡ˆ3ï¼šä¿®æ”¹é™æ€èµ„æºé…ç½®
å¦‚æœè·¯å¾„æœ‰é—®é¢˜ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼š

```java
@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
    String uploadPath = System.getProperty("user.dir") + File.separator + "uploads";
    System.out.println("Static resource path: " + uploadPath);
    
    registry.addResourceHandler("/static/**")
            .addResourceLocations("file:" + uploadPath + "/")
            .setCachePeriod(0);
}
```

## ğŸ“‹ æµ‹è¯•ç»“æœè®°å½•

è¯·æŒ‰é¡ºåºæµ‹è¯•å¹¶è®°å½•ç»“æœï¼š

1. **é‡å¯åç«¯æœåŠ¡** âœ…/âŒ
2. **è®¿é—® `/api/test/debug`** - ç»“æœï¼š_______
3. **è®¿é—® `/api/test/files`** - ç»“æœï¼š_______
4. **è®¿é—® `/api/test/image/{filename}`** - ç»“æœï¼š_______
5. **è®¿é—® `/static/recipes/{filename}`** - ç»“æœï¼š_______

## âœ… é¢„æœŸç»“æœ

- `/api/test/debug` åº”è¯¥æ˜¾ç¤ºæ–‡ä»¶å­˜åœ¨ä¸”å¯è¯»
- `/api/test/files` åº”è¯¥åˆ—å‡ºä¸Šä¼ çš„æ–‡ä»¶
- `/api/test/image/{filename}` åº”è¯¥èƒ½æ­£å¸¸æ˜¾ç¤ºå›¾ç‰‡
- `/static/recipes/{filename}` åº”è¯¥èƒ½æ­£å¸¸æ˜¾ç¤ºå›¾ç‰‡

è¯·æŒ‰ç…§ä¸Šè¿°æ­¥éª¤è¿›è¡Œè°ƒè¯•ï¼Œå¹¶å‘Šè¯‰æˆ‘æ¯ä¸ªæµ‹è¯•çš„ç»“æœï¼


