# 🖼️ 食谱图片上传功能测试说明

## 📋 功能概述

已成功实现食谱图片上传功能，包括：
- ✅ 后端文件上传服务
- ✅ 图片上传API接口
- ✅ 前端图片上传组件
- ✅ 静态资源访问配置
- ✅ 图片显示和预览

## 🚀 测试步骤

### 1. 启动后端服务
```bash
cd D:\JetBrains\IdeaProjects\health-platform
mvn spring-boot:run
```

### 2. 启动前端服务
```bash
cd D:\JetBrains\WebstormProjects\health-admin
npm run dev
```

### 3. 测试图片上传功能

#### 3.1 创建新食谱并上传图片
1. 打开前端页面：`http://localhost:3000`
2. 进入"食谱管理"页面
3. 点击"新增食谱"按钮
4. 填写食谱基本信息
5. 在"食谱图片"区域点击上传按钮
6. 选择一张JPG或PNG图片（小于2MB）
7. 观察图片是否成功上传并显示预览
8. 点击"确定"保存食谱

#### 3.2 编辑现有食谱并更换图片
1. 在食谱列表中点击某个食谱的"编辑"按钮
2. 如果该食谱已有图片，应该能看到现有图片
3. 点击"删除"按钮移除现有图片
4. 重新上传新图片
5. 保存更改

#### 3.3 查看食谱详情
1. 点击食谱卡片或"查看"按钮
2. 在食谱详情弹窗中应该能看到上传的图片
3. 图片应该正确显示，包括占位符（当没有图片时）

## 🔍 验证要点

### 后端验证
- [ ] 文件成功保存到 `uploads/recipes/` 目录
- [ ] 返回的图片URL格式正确：`/static/recipes/{uuid}.{ext}`
- [ ] 支持JPG、PNG格式图片
- [ ] 文件大小限制2MB生效
- [ ] 静态资源访问正常

### 前端验证
- [ ] 图片上传组件正常工作
- [ ] 图片预览功能正常
- [ ] 图片删除功能正常
- [ ] 错误提示信息正确
- [ ] 图片在食谱卡片中正确显示
- [ ] 图片在详情弹窗中正确显示

## 🐛 可能的问题和解决方案

### 问题1：图片上传失败
**原因**：后端服务未启动或接口路径错误
**解决**：检查后端服务状态，确认接口路径正确

### 问题2：图片无法显示
**原因**：静态资源配置问题
**解决**：检查WebConfig配置，确认文件路径正确

### 问题3：文件保存失败
**原因**：uploads目录权限问题
**解决**：确保uploads目录存在且有写入权限

## 📁 文件结构

```
uploads/
└── recipes/
    ├── uuid1.jpg
    ├── uuid2.png
    └── ...
```

## 🔗 API接口

- **上传图片**：`POST /api/admin/recipes/upload-image`
- **静态资源访问**：`GET /static/recipes/{filename}`

## 📝 注意事项

1. 确保uploads目录存在且有写入权限
2. 图片文件会自动生成UUID名称，避免重名
3. 支持的文件格式：JPG、PNG
4. 文件大小限制：2MB
5. 删除食谱时不会自动删除关联的图片文件（需要手动清理）

## ✅ 测试完成标准

- [ ] 能够成功上传图片
- [ ] 图片在界面上正确显示
- [ ] 图片预览功能正常
- [ ] 图片删除功能正常
- [ ] 错误处理机制正常
- [ ] 静态资源访问正常

